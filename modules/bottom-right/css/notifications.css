/* --- LAYOUT GENERAL --- */
.notif-layout { width: 100%; height: 100%; display: flex; flex-direction: column; }

/* --- TOOLBAR --- */
.notif-toolbar {
    width: 100%; height: calc(3.5 * var(--unit));
    display: flex; gap: calc(0.5 * var(--unit));
    padding: calc(0.5 * var(--unit)) var(--gap-size);
    border-bottom: 1px solid rgba(0,0,0,0.05);
    background-color: rgba(255,255,255,0.2);
    flex-shrink: 0; z-index: 20;
}

.filter-btn {
    flex: 1; background-color: #fff; border: 1px solid rgba(0,0,0,0.1);
    border-radius: calc(0.6 * var(--unit));
    color: #6a7558; font-family: 'Courier New', Courier, monospace;
    font-size: 1.0cqw; font-weight: bold;
    cursor: pointer; position: relative;
    display: flex; justify-content: center; align-items: center;
    transition: background-color 0.2s;
}
.filter-btn.has-filters { background-color: #e2f0cb; border-color: #889476; color: #3a422e; }
.filter-btn:hover, .filter-btn.active { background-color: #f1f8e9; border-color: #889476; }

.refresh-btn {
    width: calc(2.5 * var(--unit)); height: 100%; border-radius: calc(0.6 * var(--unit));
    background-color: #fff; border: 1px solid rgba(0,0,0,0.1);
    display: flex; justify-content: center; align-items: center; cursor: pointer; flex-shrink: 0;
}
.refresh-btn:hover { background-color: #f1f8e9; }
.refresh-btn .btn-icon-mask { width: 60%; height: 60%; background-color: #6a7558; }

/* --- DROPDOWNS --- */
.dropdown-menu {
    position: absolute; top: 110%;
    background-color: #fdfdfd; border-radius: calc(0.5 * var(--unit));
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    padding: calc(0.8 * var(--unit));
    display: none; flex-direction: column; gap: calc(0.3 * var(--unit));
    overflow-y: auto; z-index: 100;
    min-width: calc(12 * var(--unit));
}
.filter-btn.active .dropdown-menu { display: flex; }

#filter-user-btn .dropdown-menu { left: 0; width: 180%; }
#filter-type-btn .dropdown-menu { left: auto; right: 0; width: 150%; }

/* --- DATE PICKER DROPDOWN (ANCHO REDUCIDO) --- */
#filter-date-btn .dropdown-menu {
    /* Reducido un 10% aprox (de 320% a 290%) */
    width: 290%; 
    min-width: calc(26 * var(--unit));
    left: 50%; transform: translateX(-50%);
    padding: calc(1.5 * var(--unit));
}

.picker-range-wrapper {
    display: flex; justify-content: space-between; 
    gap: calc(1 * var(--unit)); 
    width: 100%;
}

.picker-group {
    flex: 1; display: flex; flex-direction: column; align-items: center; min-width: 0;
}

.picker-label {
    font-size: 0.9cqw; font-weight: bold; color: #889476; margin-bottom: calc(0.8 * var(--unit)); letter-spacing: 0.1em;
}

/* --- IOS PICKER RODILLO --- */
.ios-picker {
    display: flex; justify-content: center;
    height: calc(10.5 * var(--unit)); 
    background: transparent; position: relative; overflow: hidden; 
    cursor: grab; user-select: none; width: 100%;
    gap: 0;
    mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 70%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 70%, transparent 100%);
}
.ios-picker:active { cursor: grabbing; }

.picker-highlight {
    position: absolute; top: 50%; left: 0; width: 100%;
    height: calc(3.5 * var(--unit));
    transform: translateY(-50%);
    background-color: rgba(136, 148, 118, 0.08);
    border-top: 1px solid rgba(136, 148, 118, 0.2);
    border-bottom: 1px solid rgba(136, 148, 118, 0.2);
    pointer-events: none; z-index: 0;
}

.picker-col {
    height: 100%; flex: 1; position: relative; z-index: 1;
    overflow-y: scroll; scroll-snap-type: y mandatory; scrollbar-width: none;
}
.picker-col::-webkit-scrollbar { display: none; }

.col-day::after, .col-month::after {
    content: ''; position: absolute; top: 25%; bottom: 25%; right: -2px; width: 1px;
    background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.1), transparent);
}

.picker-spacer { height: calc(3.5 * var(--unit)); pointer-events: none; }

/* ITEMS FECHA */
.picker-item {
    height: calc(3.5 * var(--unit));
    display: flex; justify-content: center; align-items: center;
    font-family: 'Courier New', Courier, monospace;
    font-size: 1.1cqw; color: #999; 
    padding: 0;
    scroll-snap-align: center; cursor: pointer;
    transition: transform 0.1s, color 0.1s, opacity 0.1s;
    transform: scale(0.9); opacity: 0.6;
}
.picker-item.selected {
    color: #222; font-weight: 800; transform: scale(1.15); opacity: 1;
}

/* OTROS */
.btn-today { margin-top: calc(1 * var(--unit)); width: 100%; padding: calc(0.6 * var(--unit)); background-color: #e2f0cb; border: none; border-radius: calc(0.5 * var(--unit)); font-family: 'Courier New', Courier, monospace; font-weight: bold; color: #5a6548; cursor: pointer; font-size: 1.0cqw; }
.btn-today:hover { background-color: #d4e6b5; }
.dd-item { padding: calc(0.8 * var(--unit)); font-size: 1.1cqw; text-align: left; border-radius: calc(0.3 * var(--unit)); cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.dd-item:hover { background-color: #f0f0f0; }
.dd-item.selected { background-color: #e2f0cb; font-weight: bold; }
.dd-item.selected::after { content: 'âœ”'; font-size: 0.8em; color: #5a6548; }
.dd-search-wrapper { width: 100%; padding-bottom: calc(0.5 * var(--unit)); border-bottom: 1px solid rgba(0,0,0,0.1); margin-bottom: calc(0.3 * var(--unit)); }
.dd-search-wrapper input { width: 100%; padding: calc(0.8 * var(--unit)); border: 1px solid rgba(0,0,0,0.1); border-radius: calc(0.5 * var(--unit)); background-color: rgba(255,255,255,0.6); font-family: 'Courier New', Courier, monospace; font-size: 1.0cqw; color: #444; outline: none; transition: background-color 0.2s; }
.dd-search-wrapper input:focus { background-color: #fff; border-color: rgba(0,0,0,0.2); }
.dd-separator { height: 1px; background: linear-gradient(90deg, transparent, rgba(0,0,0,0.1), transparent); margin: calc(0.3 * var(--unit)) 0; width: 100%; }
.notif-list-area { flex-grow: 1; position: relative; overflow: hidden; }
.notif-item { position: relative; display: flex; justify-content: space-between; align-items: center; padding: calc(1.5 * var(--unit)) calc(1.2 * var(--unit)); cursor: default; font-family: 'Courier New', Courier, monospace; border-bottom: 1px solid rgba(0,0,0,0.05); }
.notif-item::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent); transform: scaleX(0); transform-origin: center; transition: transform 0.4s; z-index: 0; }
.notif-item:hover::before { transform: scaleX(1); }
.notif-left { display: flex; flex-direction: column; gap: 4px; position: relative; z-index: 1; max-width: 65%; }
.notif-right { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; position: relative; z-index: 1; }
.notif-user { font-weight: bold; color: #556; font-size: 1.3cqw; }
.notif-desc { font-size: 1.1cqw; color: #777; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.notif-type { font-size: 0.9cqw; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block;}
.notif-date { font-size: 0.9cqw; color: #999; text-align: right;}
.badge-Combate { background-color: #ffe0e0; color: #d9534f; }
.badge-Intercambio { background-color: #e0ffe0; color: #5cb85c; }
.badge-Mensaje { background-color: #e0e0ff; color: #5bc0de; }
.badge-Sistema { background-color: #eee; color: #777; }